<main>
    <div style="height: 100%;">
        <app-header></app-header>
        <div class="watermark-container first-water-mark">
            <water-mark-text label="ARCHIFF"></water-mark-text>
        </div>
        <div class="watermark-container">
            <water-mark-text  label="ARCHIFF"></water-mark-text>
        </div>
        <div class="watermark-container">
            <water-mark-text label="ARCHIFF"></water-mark-text>
        </div>
    </div>
    <div class="modal">
        @if(currentViewIndex === 1){
            <h2 class="modal-heading">Reset Password</h2>
            <p>To reset your password, please enter the email address associated with your archiff account</p>
            <form class="input-group mb-5" [formGroup]="emailForm">
                <label for="email">Email Address</label>
                <input type="text" formControlName="email"
                    class="placeholder:text-[14px] placeholder:text-[#475156]"
                    id="email" placeholder="Enter email"
                />
                <button [disabled]="this.emailForm.value.email == ''" (click)="requestPasswordReset()" class="mt-6 disabled:opacity-50 disabled:!cursor-not-allowed verify-btn flex gap-1 items-center justify-center">
                    @if(loading){
                        <span>REQUESTING</span>
                        <app-loader [loading]="loading"></app-loader>
                    }@else {
                        RESET  
                        <img style="color:white" src="/assets/icons/arrow-right-white.svg" alt="" />
                    }
                </button>
            </form>
        }
        @else if(currentViewIndex === 2){
            <h2>Verify Your Account</h2>
            <p>Enter the code that has been sent to your email</p>
            <form class="input-group mb-5" [formGroup]="otpForm">
                <label for="verification-code">Verification Code</label>
                <input type="text" formControlName="code"
                class="placeholder:text-[14px] placeholder:text-[#475156]"
                id="verification-code" placeholder="Enter Code"
                />
                <app-otp-timer (resend)="resendOtp()" />
            </form>
            <div class="text-[red] mb-4 text-center text-[14px]" *ngIf="this.errorMessage !== ''">{{this.errorMessage}}</div>
            <button [disabled]="this.otpForm.value.code == ''" (click)="verifyResetOtp()" class="verify-btn flex gap-1 items-center justify-center disabled:opacity-50 disabled:!cursor-not-allowed">
                @if(loading){
                    <span>VERIFYING</span>
                    <app-loader [loading]="loading"></app-loader>
                }@else {
                    VERIFY  
                    <img style="color:white" src="/assets/icons/arrow-right-white.svg" alt="" />
                }
            </button>
        }@else if(currentViewIndex === 3){
            <form class="input-group mb-5" [formGroup]="passwordForm">
                <div class="input-group">
                    <label for="password">Password</label>
                    <input type="password" id="password">
                </div>
                <div class="input-group">
                    <label for="new-password">New Password</label>
                    <input type="password" id="new-password">
                </div>
                <button  (click)="resetPassword()" class="verify-btn flex gap-1 items-center justify-center disabled:opacity-50 disabled:!cursor-not-allowed">
                    @if(loading){
                        <span>RESETTING</span>
                        <app-loader [loading]="loading"></app-loader>
                    }@else {
                        CHANGE PASSWORD 
                        <img style="color:white" src="/assets/icons/arrow-right-white.svg" alt="" />
                    }
                </button>
            </form>
        }
    </div>
    <div class="footer">
        <app-footer></app-footer>
    </div>  
</main>